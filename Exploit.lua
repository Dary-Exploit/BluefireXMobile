-- Obtén los servicios necesarios
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UIS = game:GetService("UserInputService")

-- Funciones de utilidad para animaciones
local function fadeIn(element)
    element.Visible = true
    element.BackgroundTransparency = 1
    local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local tweenProperties = { BackgroundTransparency = 0 }
    local tween = TweenService:Create(element, tweenInfo, tweenProperties)
    tween:Play()
end

local function fadeOut(element)
    local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.In)
    local tweenProperties = { BackgroundTransparency = 1 }
    local tween = TweenService:Create(element, tweenInfo, tweenProperties)
    tween:Play()
    tween.Completed:Connect(function()
        element.Visible = false
    end)
end

-- Crear la interfaz de usuario
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "CustomScriptUI"
screenGui.Parent = playerGui

-- Crear el botón
local openButton = Instance.new("TextButton")
openButton.Text = "Abrir Ventana"
openButton.Size = UDim2.new(0, 200, 0, 50)
openButton.Position = UDim2.new(0, 10, 0, 10)
openButton.Parent = screenGui

-- Función para abrir la ventana con animaciones
local function abrirVentana()
    -- Crear la ventana
    local ventana = Instance.new("Frame")
    ventana.Size = UDim2.new(0, 300, 0, 150)
    ventana.Position = UDim2.new(0.5, -150, 0.5, -75)
    ventana.BackgroundColor3 = Color3.new(1, 1, 1)
    ventana.Visible = false
    ventana.Parent = screenGui

    -- Crear el TextBox
    local textBox = Instance.new("TextBox")
    textBox.Size = UDim2.new(0, 200, 0, 30)
    textBox.Position = UDim2.new(0.5, -100, 0, 20)
    textBox.PlaceholderText = "Inserta el script aquí"
    textBox.Parent = ventana

    -- Crear el botón de ejecutar con animación
    local ejecutarButton = Instance.new("TextButton")
    ejecutarButton.Text = "Ejecutar"
    ejecutarButton.Size = UDim2.new(0, 100, 0, 30)
    ejecutarButton.Position = UDim2.new(0.5, -50, 0, 70)
    ejecutarButton.Parent = ventana

    -- Conectar la función al clic del botón
    ejecutarButton.MouseButton1Click:Connect(function()
        local scriptText = textBox.Text
        local success, error = pcall(function()
            loadstring(scriptText)()
        end)

        if not success then
            print("Error al ejecutar el script:", error)
        end
    end)

    -- Conectar funciones a eventos de animación
    openButton.MouseButton1Click:Connect(function()
        fadeIn(ventana)
    end)

    ejecutarButton.MouseButton1Click:Connect(function()
        fadeOut(ventana)
    end)
end

-- Conectar la función al clic del botón
openButton.MouseButton1Click:Connect(abrirVentana)

-- Agregar soporte para dispositivos móviles
UIS.InputBegan:Connect(function(input, gameProcessedEvent)
    if input.UserInputType == Enum.UserInputType.Touch and not gameProcessedEvent then
        abrirVentana()
    end
end)
